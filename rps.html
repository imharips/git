<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .game{
            align-items: center;
            justify-content: center;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>
    
    <div class="game">
        <h1>Rock Paper Scissor Game</h1><br>
    <div class="score">
        <div class="playerScore">
            <h3>Player</h3>
            <div class="p-count">0</div>
        </div>
        <div class="comScore">
            <h3>Computer</h3>
            <div class="c-count">0</div>
        </div>
    </div>
    <div class="move">Choose your move</div>
    <div class="noOfMovesLeft">Number of moves left:10</div>
    <div class="options">   
        <button class="rock" name="rock" >Rock</button>
        <button class="paper" name="paper" >Paper</button>
        <button class="scissor" name="scissor" >Scissor</button>
    </div>
    <div class="result"></div>
    <button class="reload" name="reload"></button>
    </div>
    <script>
            let playerScore=0;
            let computerScore=0;
            let moves=0;
            let moveLeft=10;
        const game=()=>{
            
            

            const playGame=()=>{
                
                const rock=document.querySelector('.rock');
                const paper=document.querySelector('.paper');
                const scissor=document.querySelector('.scissor');
                const playerOptions=[rock,paper,scissor];
                const computerChoices=['rock','paper','scissor'];

                

               
                playerOptions.forEach(option=>{
                    option.addEventListener('click',function(){
                        console.log('hi');
                        const movesLeft=document.querySelector('.noOfMovesLeft');
                        moves++;
                        moveLeft--;
                        movesLeft.innerHTML='Moves left : '+moveLeft;

                        const choice=Math.floor(Math.random()*computerChoices.length);
                        var computerChoice=computerChoices[choice];
                        winner(event.target.name,computerChoice);
                        console.log(event.target.name,computerChoice);
                        
                       if(moves>=10){
                        alert("Game over!!!");

                       }


                    })
                
                })


            }

            const winner=(player,computer)=>{
                
               const result=document.querySelector('.result');
               const p_count=document.querySelector('.p-count');
               const c_count=document.querySelector('.c-count');

               if(player=='rock'){
                if(computer=='scissor'){
                    result.textContent='Player won';
                    playerScore++;
                    p_count.textContent=playerScore;
                }
                else if(computer=='paper'){
                    result.textContent='Computer won';
                    computerScore++;
                    c_count.textContent=computerScore;
                }
               }
               else if(player=='paper'){
                if(computer=='rock'){
                    result.textContent='Player won';
                    playerScore++;
                    p_count.textContent=playerScore;

                }
                else if(computer=='scissor'){
                    result.textContent='Computer won';
                    computerScore++;
                    c_count.textContent=computerScore;

                }
               }
               else if(player=='scissor'){
                if(computer=='paper'){
                    result.textContent='Player won';
                    playerScore++;
                    p_count.textContent=playerScore;

                }
                else if(computer=='rock'){
                    result.textContent='Computer won';
                    computerScore++;
                    c_count.textContent=computerScore;

                }
               }


            }
            const gameOver=(playerOption,movesLeft)=>{
                const result1=document.querySelector('.move');
                const result2=document.querySelector('.noOfMovesLeft');
                const reload=document.querySelector('.reload');

                result1.textContent='Game Over!!';
                playerOption.forEach(option=()=>{
                    option.style.display='none';
                })
                if(playerScore==computerScore){
                    result2.textContent='Tie';
                }
                else if(playerScore>computerScore){
                    result2.textContent='Player has won the game';
                }
                else{
                    result2.textContent='Computer has won the game'
                }
                reload.textContent='Restart';
                reload.addEventListener(e=()=>{
                    window.location.reload();
                })
            }
            playGame();
        }
        game();
    </script>
</body>
</html>